#Source image 
FROM ubuntu:14.04

#Maintainer of the file
MAINTAINER Abdul "Abdulhafis@example.com"

#updating the repository
RUN apt-get update && apt-get -y install openjdk-7-jdk wget 

#Creating new path and assigning as workdir
RUN mkdir -p /usr/local/share/jboss
WORKDIR /usr/local/share/jboss/

#creating user and assigning the same
RUN useradd jboss && groupadd test && usermod -g test jboss

#Downloading the package and adding to the Workdir
RUN cd $HOME \ 
&& wget http://download.jboss.org/jbossas/7.1/jboss-as-7.1.1.Final/jboss-as-7.1.1.Final.tar.gz 
RUN tar -xvzf $HOME/jboss-as-7.1.1.Final.tar.gz 

#Adding the file to the work directory
RUN mv $HOME/jboss-as-7.1.1.Final $WORKDIR
RUN rm $HOME/jboss-as-7.1.1.Final.tar.gz

#Setting the user permission
RUN chown -R jboss:test $WORKDIR

# JBoss ports
EXPOSE 8080 9990 9999

--- Still to be tested 

#Defining Jboss home env
ENV JBOSS_HOME /usr/local/share/jboss/jboss-as-7.1.1.Final

# create JBoss console user
RUN $JBOSS_HOME/bin/add-user.sh admin admin@2016 --silent

#Starting jboss
CMD ["$JBOSS_HOME/bin/standalone.sh" , "-b" , "0.0.0.0" ]
